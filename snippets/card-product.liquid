{% comment %}
  Renders a product card

  Accepts:
  - section_id: {String} The ID of the section that contains this card.
  - colour: (String) Class of the colour to use for the product card's background
  - classes: (String) Classes to add (optional)
  - product: {Object} Product Liquid object (optional)
  - lazy_load: {Boolean} Image should be lazy loaded. Default: true (optional)
  - placeholder_image: {String} The placeholder image to use when no product exists. Default: 'product-apparel-2' (optional)

  Usage:
  {% render 'card-product', section_id: section_id, product: product %}
{% endcomment %}

{%- liquid
  unless lazy_load
    assign lazy_load = true
  endunless
  unless placeholder_image
    assign placeholder_image = 'product-apparel-2'
  endunless
  unless classes
    assign classes = ""
  endunless
-%}
{% assign colour_tag = "bg-" | append: colour %}
<div class = "flex flex-col items-center w-fit max-w-[30rem] py-12 px-12 rounded-2xl {{ colour_tag }} {{ classes }}">
  <div class = "flex flex-col h-full justify-between w-full">
    <div class = "flex flex-col items-center w-full">
      <div class = "relative w-80 h-80">
        <div class = "absolute w-40 h-52 left-20">
          {% if product.metafields.custom.snapshot.value.image %}
            {{ product.metafields.custom.snapshot.value.image | image_url: width: 400 | image_tag: class: 'object-cover object-center w-40 h-52 rounded-[2.5em]'  }}
          {% else %}
            {{ placeholder_image | placeholder_svg_tag: 'placeholder-svg' }}
          {% endif %}
        </div>
        <div class = "absolute w-80 h-80">
          {% if product.metafields.custom.img_shadow.value.image %}
            {{ product.metafields.custom.img_shadow.value.image | image_url: width: 400 | image_tag  }}
          {% else %}
            {{ placeholder_image | placeholder_svg_tag: 'placeholder-svg' }}
          {% endif %}
        </div>
      </div>
      <div class = "flex flex-col w-full">
        <div class = "font-body text-lg text-black uppercase font-semibold text-wrap">{{ product.metafields.custom.collection.value.title }}</div>
        <div class = "font-display text-5xl text-black uppercase font-black text-wrap">{{ product.title | split: "]" | last }}</div>
        <div class = "flex flex-row items-center mt-2">
          <div class = "font-body text-2xl text-black uppercase font-bold">{{ product.price | money_with_currency }}</div>
          {% if product.price != product.compare_at_price %}
            <div class = "font-body text-xl text-neutral-400 uppercase font-semibold ml-4"><s>{{ product.compare_at_price | money_with_currency }}</s></div>
          {% endif %}
        </div>
        <div class = "font-body font-medium text-2xl text-black my-4">{{ product.metafields.custom.thought.value }}</div>
      </div>
    </div>
    <div class = "flex justify-start">
      <a class = "flex flex-row justify-center items-center border-black border-2 font-body font-bold text-lg px-4 py-1 rounded-xl" href = "{{ product.url }}">
        <span class = "mr-2">Shop Now</span>
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 7.42 11.59" class = "w-4 h-4">
          <polyline class="fill-none stroke-black stroke-2" stroke-linecap="round" stroke-linejoin="round" points="1.68 10.02 5.9 5.55 1.68 1.08"/>
        </svg>
      </a>
    </div>
  </div>
</div>